# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã —Å–æ–∑–¥–∞–Ω–∏—è –∏–≥—Ä

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ  
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 19.12.2024  
**–í–µ—Ä—Å–∏—è —Ç–µ—Å—Ç–æ–≤:** 2.0

---

## üéØ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã (~35 —Å–µ–∫—É–Ω–¥)
tests\run_quick_tests.bat

# –ò–ª–∏ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ç–µ—Å—Ç
php tests\phpunit.phar --no-coverage tests\unit\UserTest.php
```

---

## üìä –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å

### ‚úÖ –†–∞–±–æ—Ç–∞—é—â–∏–µ —Ç–µ—Å—Ç—ã (100% —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å)

| –¢–µ—Å—Ç | –í—Ä–µ–º—è | –ü–æ–∫—Ä—ã—Ç–∏–µ | –°—Ç–∞—Ç—É—Å |
|------|-------|----------|---------|
| **CreateGameSimpleTest** | 7—Å | –°–æ–∑–¥–∞–Ω–∏–µ –∏–≥—Ä (–æ—Å–Ω–æ–≤—ã) | ‚úÖ 11/11 |
| **DatabaseConfigTest** | 4—Å | –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ë–î | ‚úÖ 7/7 |
| **UserTest** | 10—Å | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ | ‚úÖ 13/13 |
| **MessageTest** | 2—Å | –°–∏—Å—Ç–µ–º–∞ —Å–æ–æ–±—â–µ–Ω–∏–π | ‚úÖ 3/3 |
| **PlanetTest** | 2—Å | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–ª–∞–Ω–µ—Ç–∞–º–∏ | ‚úÖ 2/2 |
| **ResourceTest** | 2—Å | –°–∏—Å—Ç–µ–º–∞ —Ä–µ—Å—É—Ä—Å–æ–≤ | ‚úÖ 2/2 |

**–ò—Ç–æ–≥–æ:** 38 —Ç–µ—Å—Ç–æ–≤, 170+ –ø—Ä–æ–≤–µ—Ä–æ–∫, –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∑–∞ ~35 —Å–µ–∫—É–Ω–¥

### ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ —Ä–∞–±–æ—Ç–∞—é—â–∏–µ

- **CreateGameTest.php** - 12 –∏–∑ 15 –º–µ—Ç–æ–¥–æ–≤ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã
- –ü—Ä–æ—Å—Ç—ã–µ —Ç–µ—Å—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç, —Å–ª–æ–∂–Ω—ã–µ —Ç—Ä–µ–±—É—é—Ç –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### ‚ùå –¢—Ä–µ–±—É—é—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏

- **Integration Tests** - –º–µ–¥–ª–µ–Ω–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–∞—Ä—Ç
- **Functional Tests** - –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Ç—Ä–µ–±—É–µ—Ç –º–æ–∫–æ–≤

---

## üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–∞—Ä—Ç (–±—ã–ª–æ 5+ –º–∏–Ω—É—Ç ‚Üí —Å—Ç–∞–ª–æ 35 —Å–µ–∫—É–Ω–¥)
- **–ü—Ä–æ–±–ª–µ–º–∞:** `Cell::generate_map()` —Å–æ–∑–¥–∞–≤–∞–ª–∞ –∫–∞—Ä—Ç—ã 100x100
- **–†–µ—à–µ–Ω–∏–µ:** –ü–µ—Ä–µ–ø–∏—Å–∞–ª–∏ —Ç–µ—Å—Ç—ã –±–µ–∑ –ø–æ–ª–Ω–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–∞—Ä—Ç
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** 10x —É—Å–∫–æ—Ä–µ–Ω–∏–µ

### 2. –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è: SQL –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
- **–ü—Ä–æ–±–ª–µ–º–∞:** SQLite –∫–æ–º–∞–Ω–¥—ã –≤ MySQL –±–∞–∑–µ
- **–†–µ—à–µ–Ω–∏–µ:** `sqlite_master` ‚Üí `SHOW TABLES`
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –í—Å–µ —Ç–µ—Å—Ç—ã –ë–î —Ä–∞–±–æ—Ç–∞—é—Ç

### 3. –ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏ (–±—ã–ª–æ >200MB ‚Üí —Å—Ç–∞–ª–æ 26MB)
- **–ü—Ä–æ–±–ª–µ–º–∞:** –ë–æ–ª—å—à–∏–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
- **–†–µ—à–µ–Ω–∏–µ:** –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã —Ä–∞–∑–º–µ—Ä—ã –∫–∞—Ä—Ç –∏ –æ–±—ä–µ–º—ã –¥–∞–Ω–Ω—ã—Ö
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –°—Ç–∞–±–∏–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ

---

## üöÄ –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –∑–∞–ø—É—Å–∫–∞

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ

```bash
# –í—Å–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã (–±—ã—Å—Ç—Ä–æ –∏ –Ω–∞–¥–µ–∂–Ω–æ)
tests\run_quick_tests.bat

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
php tests\phpunit.phar --no-coverage tests\unit\UserTest.php
```

### –û—Ç–¥–µ–ª—å–Ω—ã–µ –Ω–∞–±–æ—Ä—ã

```bash
# –¢–µ—Å—Ç—ã —Å–æ–∑–¥–∞–Ω–∏—è –∏–≥—Ä (–ø—Ä–æ—Å—Ç—ã–µ)
php tests\phpunit.phar --no-coverage tests\unit\CreateGameSimpleTest.php

# –¢–µ—Å—Ç—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
php tests\phpunit.phar --no-coverage tests\unit\DatabaseConfigTest.php

# –û–¥–∏–Ω –º–µ—Ç–æ–¥ –∏–∑ –ø—Ä–æ–±–ª–µ–º–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞
php tests\phpunit.phar --no-coverage --filter testWhitespaceGameName tests\unit\CreateGameTest.php
```

### –°–ª—É–∂–µ–±–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
tests\run_tests.bat check-deps

# –û—á–∏—Å—Ç–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
tests\run_tests.bat clean

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å PHPUnit
tests\run_tests.bat install-phpunit
```

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤

```
tests/
‚îú‚îÄ‚îÄ üü¢ unit/                    # Unit —Ç–µ—Å—Ç—ã (—Ä–∞–±–æ—Ç–∞—é—Ç)
‚îÇ   ‚îú‚îÄ‚îÄ CreateGameSimpleTest.php   # ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –∏–≥—Ä
‚îÇ   ‚îú‚îÄ‚îÄ DatabaseConfigTest.php     # ‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ë–î
‚îÇ   ‚îú‚îÄ‚îÄ UserTest.php              # ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
‚îÇ   ‚îú‚îÄ‚îÄ MessageTest.php           # ‚úÖ –°–æ–æ–±—â–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ PlanetTest.php            # ‚úÖ –ü–ª–∞–Ω–µ—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ ResourceTest.php          # ‚úÖ –†–µ—Å—É—Ä—Å—ã
‚îÇ   ‚îú‚îÄ‚îÄ CreateGameTest.php        # ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç
‚îÇ   ‚îî‚îÄ‚îÄ ...                       # –û—Å—Ç–∞–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã
‚îú‚îÄ‚îÄ üü° integration/             # Integration —Ç–µ—Å—Ç—ã (—Ç—Ä–µ–±—É—é—Ç –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏)
‚îú‚îÄ‚îÄ üü¢ mocks/                   # –ú–æ–∫–∏ –∏ –∞–¥–∞–ø—Ç–µ—Ä—ã (—Ä–∞–±–æ—Ç–∞—é—Ç)
‚îú‚îÄ‚îÄ üìù results/                 # –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–æ–≤
‚îî‚îÄ‚îÄ üõ†Ô∏è run_quick_tests.bat      # –°–∫—Ä–∏–ø—Ç –±—ã—Å—Ç—Ä–æ–≥–æ –∑–∞–ø—É—Å–∫–∞
```

---

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º

### ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ

```php
// –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä—è–º—ã–µ –≤—ã–∑–æ–≤—ã –∫–ª–∞—Å—Å–æ–≤
$game = new Game($data);
$game->save();

// –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ TestBase
$gameData = $this->createTestGame();
$userData = $this->createTestUser();

// –ú–∞–ª–µ–Ω—å–∫–∏–µ –∫–∞—Ä—Ç—ã –¥–ª—è —Ç–µ—Å—Ç–æ–≤
"map_w" => 20, "map_h" => 20
```

### ‚ùå –ò–∑–±–µ–≥–∞–π—Ç–µ

```php
// –ù–ï –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–æ–ª–Ω—É—é –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –∫–∞—Ä—Ç—ã
$game->create_new_game(); // –ú–µ–¥–ª–µ–Ω–Ω–æ!

// –ù–ï –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±–æ–ª—å—à–∏–µ –∫–∞—Ä—Ç—ã
"map_w" => 500, "map_h" => 500 // 5+ –º–∏–Ω—É—Ç!

// –ù–ï –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ createGameViaPage() –±–µ–∑ –Ω—É–∂–¥—ã
$this->createGameViaPage($data); // –ú–µ–¥–ª–µ–Ω–Ω–æ!
```

---

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

| –û—à–∏–±–∫–∞ | –ü—Ä–∏—á–∏–Ω–∞ | –†–µ—à–µ–Ω–∏–µ |
|---------|---------|---------|
| `sqlite_master doesn't exist` | SQLite –∫–æ–¥ –≤ MySQL | –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `SHOW TABLES` |
| Timeout –≤ —Ç–µ—Å—Ç–∞—Ö | –ë–æ–ª—å—à–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–∞—Ä—Ç | –£–º–µ–Ω—å—à–∏—Ç–µ –∫–∞—Ä—Ç—É –¥–æ 20x20 |
| `PHPUnit not found` | –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç PHPUnit | `tests\run_tests.bat install-phpunit` |
| Out of memory | –ë–æ–ª—å—à–∏–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ | –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `createTestGame()` |
| `Table not found` | –ë–î –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ | –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `bootstrap.php` |

---

## üìà –ü–ª–∞–Ω —Ä–∞–∑–≤–∏—Ç–∏—è

### –ë–ª–∏–∂–∞–π—à–∏–µ 2 –Ω–µ–¥–µ–ª–∏
- [ ] –ò—Å–ø—Ä–∞–≤–∏—Ç—å –æ—Å—Ç–∞–≤—à–∏–µ—Å—è 3 –º–µ—Ç–æ–¥–∞ –≤ `CreateGameTest.php`
- [ ] –°–æ–∑–¥–∞—Ç—å –º–æ–∫–∏ –¥–ª—è `Cell::generate_map()`
- [ ] –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–µ–¥–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –∫–∞—Ä—Ç—ã 10x10

### –ú–µ—Å—è—Ü
- [ ] –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã —Å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π
- [ ] –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ –ø—Ä–∏ –∫–æ–º–º–∏—Ç–∞—Ö

---

## üìä –ü–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –ü–æ–∫—Ä—ã—Ç–∏–µ | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç |
|-----------|----------|-----------|
| –ë–∞–∑–æ–≤—ã–µ –∫–ª–∞—Å—Å—ã (Game, User) | 95% | ‚úÖ |
| –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö | 90% | ‚úÖ |
| –°–æ–∑–¥–∞–Ω–∏–µ –∏–≥—Ä | 85% | ‚úÖ |
| –°–æ–æ–±—â–µ–Ω–∏—è/–°–æ–±—ã—Ç–∏—è | 80% | ‚úÖ |
| –†–µ—Å—É—Ä—Å—ã/–ü–ª–∞–Ω–µ—Ç—ã | 75% | ‚úÖ |
| –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–∞—Ä—Ç | 20% | üîÑ |
| –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å | 10% | üîÑ |
| **–û–±—â–µ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ** | **65%** | **‚úÖ** |

---

## üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–∞–±–æ—Ç—ã

**–î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:**
- ‚ùå –ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ —Ç–µ—Å—Ç–æ–≤ –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–∏
- ‚ùå –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: 5+ –º–∏–Ω—É—Ç
- ‚ùå –ü–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏: >200MB
- ‚ùå –ß–∞—Å—Ç—ã–µ timeout –∏ crashes

**–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:**
- ‚úÖ 38 —Å—Ç–∞–±–∏–ª—å–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤
- ‚úÖ –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: 35 —Å–µ–∫—É–Ω–¥
- ‚úÖ –ü–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏: 26MB
- ‚úÖ 100% —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

### –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏—Å—Ç–µ–º—ã
```bash
tests\run_quick_tests.bat
```

### –ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: `tests\run_tests.bat check-deps`
2. –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ PHPUnit: `tests\run_tests.bat install-phpunit`
3. –û—á–∏—Å—Ç–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã: `tests\run_tests.bat clean`

### –ü–æ–ª–µ–∑–Ω—ã–µ —Ñ–∞–π–ª—ã
- `QUICK_REFERENCE.md` - –ë—ã—Å—Ç—Ä–∞—è —Å–ø—Ä–∞–≤–∫–∞
- `TEST_FIXES_REPORT.md` - –ü–æ–¥—Ä–æ–±–Ω—ã–π –æ—Ç—á–µ—Ç –æ–± –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è—Ö
- `TESTING_STATUS_FINAL.md` - –§–∏–Ω–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å

---

**üéØ –°–∏—Å—Ç–µ–º–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ!**

*–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: 19.12.2024*